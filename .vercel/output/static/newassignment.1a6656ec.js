import{S as ce,i as fe,s as he,e as m,t as L,a as N,c as g,b as v,d as C,f as h,g as x,h as f,j as ae,k as R,l as i,m as j,n as P,o as ie,p as de,r as ue}from"./chunks/index.d6ca2185.js";import{s as W}from"./chunks/backend.3a7ea2ee.js";import"./chunks/_commonjsHelpers.eeb557de.js";function re(t,e,a){const d=t.slice();return d[13]=e[a],d[14]=e,d[15]=a,d}function pe(t){let e,a,d;function r(){t[10].call(e,t[14],t[15])}return{c(){e=m("textarea"),this.h()},l(s){e=g(s,"TEXTAREA",{class:!0,placeholder:!0}),v(e).forEach(h),this.h()},h(){f(e,"class","textarea textarea-primary max-w-lg h-32"),f(e,"placeholder","Question Answer")},m(s,p){R(s,e,p),j(e,t[13].answer),a||(d=P(e,"input",r),a=!0)},p(s,p){t=s,p&2&&j(e,t[13].answer)},d(s){s&&h(e),a=!1,d()}}}function _e(t){let e,a,d;function r(){t[8].call(e,t[14],t[15])}function s(){return t[9](t[13],t[14],t[15])}return{c(){e=m("input"),this.h()},l(p){e=g(p,"INPUT",{accept:!0,type:!0,class:!0}),this.h()},h(){f(e,"accept","image/png, image/jpeg"),f(e,"type","file"),f(e,"class","file-input file-input-bordered file-input-primary w-full max-w-lg")},m(p,_){R(p,e,_),a||(d=[P(e,"change",r),P(e,"change",s)],a=!0)},p(p,_){t=p},d(p){p&&h(e),a=!1,ue(d)}}}function oe(t){let e,a,d=t[15]+1+"",r,s,p,_,w,Q,y,T,E;function k(){t[7].call(w,t[14],t[15])}function F(n,o){return n[13].is_file?_e:pe}let I=F(t),l=I(t);return{c(){e=m("div"),a=m("h1"),r=L(d),s=L("."),p=N(),_=m("div"),w=m("input"),Q=N(),l.c(),y=N(),this.h()},l(n){e=g(n,"DIV",{class:!0});var o=v(e);a=g(o,"H1",{class:!0});var q=v(a);r=C(q,d),s=C(q,"."),q.forEach(h),p=x(o),_=g(o,"DIV",{class:!0});var D=v(_);w=g(D,"INPUT",{type:!0,placeholder:!0,class:!0}),Q=x(D),l.l(D),D.forEach(h),y=x(o),o.forEach(h),this.h()},h(){f(a,"class","text-white text-2xl"),f(w,"type","text"),f(w,"placeholder","Question Text"),f(w,"class","input input-bordered input-primary w-full max-w-lg"),f(_,"class","flex flex-col gap-y-2 w-[32rem]"),f(e,"class","flex flex-row gap-x-3 w-full items-center justify-center")},m(n,o){R(n,e,o),i(e,a),i(a,r),i(a,s),i(e,p),i(e,_),i(_,w),j(w,t[13].question),i(_,Q),l.m(_,null),i(e,y),T||(E=P(w,"input",k),T=!0)},p(n,o){t=n,o&2&&w.value!==t[13].question&&j(w,t[13].question),I===(I=F(t))&&l?l.p(t,o):(l.d(1),l=I(t),l&&(l.c(),l.m(_,null)))},d(n){n&&h(e),l.d(),T=!1,E()}}}function me(t){let e,a,d,r,s,p,_,w,Q,y,T,E,k,F,I,l,n,o,q,D,H,V,X,z,U,G,J,Y,M=t[1],b=[];for(let u=0;u<M.length;u+=1)b[u]=oe(re(t,M,u));return{c(){e=m("h1"),a=L("Make a New Assignment"),d=N(),r=m("div"),s=m("input"),p=N(),_=m("h1"),w=L("Questions"),Q=N(),y=m("div");for(let u=0;u<b.length;u+=1)b[u].c();T=N(),E=m("div"),k=m("label"),F=L("+ New Question"),I=N(),l=m("ul"),n=m("li"),o=m("a"),q=L("Multiple Choice/Free Response"),D=N(),H=m("li"),V=m("a"),X=L("File Upload"),z=N(),U=m("button"),G=L("Create Assignment"),this.h()},l(u){e=g(u,"H1",{class:!0});var A=v(e);a=C(A,"Make a New Assignment"),A.forEach(h),d=x(u),r=g(u,"DIV",{class:!0});var c=v(r);s=g(c,"INPUT",{type:!0,placeholder:!0,class:!0}),p=x(c),_=g(c,"H1",{class:!0});var S=v(_);w=C(S,"Questions"),S.forEach(h),Q=x(c),y=g(c,"DIV",{class:!0});var Z=v(y);for(let K=0;K<b.length;K+=1)b[K].l(Z);Z.forEach(h),T=x(c),E=g(c,"DIV",{class:!0});var B=v(E);k=g(B,"LABEL",{tabindex:!0,class:!0});var $=v(k);F=C($,"+ New Question"),$.forEach(h),I=x(B),l=g(B,"UL",{tabindex:!0,class:!0});var O=v(l);n=g(O,"LI",{});var ee=v(n);o=g(ee,"A",{});var te=v(o);q=C(te,"Multiple Choice/Free Response"),te.forEach(h),ee.forEach(h),D=x(O),H=g(O,"LI",{});var le=v(H);V=g(le,"A",{});var se=v(V);X=C(se,"File Upload"),se.forEach(h),le.forEach(h),O.forEach(h),B.forEach(h),z=x(c),U=g(c,"BUTTON",{class:!0});var ne=v(U);G=C(ne,"Create Assignment"),ne.forEach(h),c.forEach(h),this.h()},h(){f(e,"class","text-white text-center text-5xl mt-10"),f(s,"type","text"),f(s,"placeholder","Assignment Name"),f(s,"class","input input-bordered input-primary w-full max-w-lg"),f(_,"class","text-white text-4xl my-5"),f(y,"class","flex flex-col gap-y-10"),f(k,"tabindex","0"),f(k,"class","btn btn-primary mt-5"),f(l,"tabindex","0"),f(l,"class","dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52"),f(E,"class","dropdown dropdown-hover"),f(U,"class","btn btn-success"),ae(U,"btn-disabled",t[2]),f(r,"class","flex flex-col gap-y-5 items-center mt-10")},m(u,A){R(u,e,A),i(e,a),R(u,d,A),R(u,r,A),i(r,s),j(s,t[0]),i(r,p),i(r,_),i(_,w),i(r,Q),i(r,y);for(let c=0;c<b.length;c+=1)b[c].m(y,null);i(r,T),i(r,E),i(E,k),i(k,F),i(E,I),i(E,l),i(l,n),i(n,o),i(o,q),i(l,D),i(l,H),i(H,V),i(V,X),i(r,z),i(r,U),i(U,G),J||(Y=[P(s,"input",t[6]),P(o,"click",t[3]),P(V,"click",t[4]),P(U,"click",t[5])],J=!0)},p(u,[A]){if(A&1&&s.value!==u[0]&&j(s,u[0]),A&2){M=u[1];let c;for(c=0;c<M.length;c+=1){const S=re(u,M,c);b[c]?b[c].p(S,A):(b[c]=oe(S),b[c].c(),b[c].m(y,null))}for(;c<b.length;c+=1)b[c].d(1);b.length=M.length}A&4&&ae(U,"btn-disabled",u[2])},i:ie,o:ie,d(u){u&&h(e),u&&h(d),u&&h(r),de(b,u),J=!1,ue(Y)}}}function ge(t,e,a){let d,r="",s=[];const p=()=>a(1,s=[...s,{question:"",answer:"",is_file:!1}]),_=()=>a(1,s=[...s,{question:"",answer:"",is_file:!0}]);async function w(){for(let l of s)if(l.is_file){const n=l.files.item(0);let{error:o}=await W.storage.from("answers").upload(l.answer,n);if(o)throw o}}async function Q(l){await Promise.all(s.map((n,o)=>W.from("Question").insert({number:o+1,text:n.question,answer:n.answer,is_file:n.is_file,assignment_id:l})))}function y(){let l=new URL(window.location.href).searchParams;if(!l.has("class"))return alert("Error occured: Assignment must be bound to a class");let n=-1;w().then(()=>W.from("Assignment").insert({name:r,class_id:parseInt(l.get("class"))}).select()).then(({data:o,error:q})=>{if(q)throw q;return n=o[0].id,Q(n)}).then(()=>document.location.href=`/assignment/${n}`).catch(o=>o.message)}function T(){r=this.value,a(0,r)}function E(l,n){l[n].question=this.value,a(1,s)}function k(l,n){l[n].files=this.files,a(1,s)}const F=(l,n,o)=>a(1,n[o].answer=Date.now().toString(),s);function I(l,n){l[n].answer=this.value,a(1,s)}return t.$$.update=()=>{t.$$.dirty&3&&a(2,d=!(r!=""&&s.length>0&&s.every(l=>l.question!=""&&l.answer!="")))},[r,s,d,p,_,y,T,E,k,F,I]}class ye extends ce{constructor(e){super(),fe(this,e,ge,me,he,{})}}export{ye as default};
